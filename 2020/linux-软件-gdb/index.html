<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Jiang .">
  
  
  
  <link rel="prev" href="https://jfy0o0.github.io/2020/cpp_stl_algorithm/" />
  <link rel="next" href="https://jfy0o0.github.io/2020/boost-property_tree/" />
  <link rel="canonical" href="https://jfy0o0.github.io/2020/linux-%E8%BD%AF%E4%BB%B6-gdb/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Linux Soft - gdb | Jiang . &#39;s blog
       
  </title>
  <meta name="title" content="Linux Soft - gdb | Jiang . &#39;s blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/jfy0o0.github.io"
    },
    "articleSection" : "posts",
    "name" : "Linux Soft - gdb",
    "headline" : "Linux Soft - gdb",
    "description" : "gdb GDB是一个由GNU开源组织发布的、UNIX\/LINUX操作系统下的、基于命令行的、功能强大的程序调试工具。 对于一名Linux下工作的c\/c\u002b\u002b程序员，gdb是必不可少的工具；\n启动 gdb test gdb -q test \/\/表示不打印gdb版本信息，界面较为干净； 运行命令    命令 缩写 说明     run r 运行程序，当遇到断点后，程序会在断点处停止运行，等待用户输入下一步的命令。   continue c 继续执行，到下一个断点处（或运行结束）   next n 单步跟踪程序，当遇到函数调用时，也不进入此函数体；此命令同 step 的主要区别是，step 遇到用户自定义的函数，将步进到函数中去运行，而 next 则直接调用函数，不会进入到函数体内。   step s 单步调试如果有函数调用，则进入函数；与命令n不同，n是不进入调用的函数的   until  当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。   until \u002b line num  运行至某行，不仅仅用来跳出循环   finish  运行程序，直到当前函数完成返回，并打印函数返回时的堆栈地址和返回值及参数值等信息。   call  调用程序中可见的函数，并传递“参数”，如：call gdb_test(55)   quit q 简记为 q ，退出gdb    设置断点    命令 缩写 说明     break n b n 在第n行处设置断点   b fn1 if a\u0026gt;b  条件断点设置   break func b 在函数func()的入口处设置断点，如：break cb_button   delete 断点号n  删除第n个断点   disable 断点号n  暂停第n个断点   enable 断点号n  开启第n个断点   clear 行号n  清除第n行的断点   info b  显示当前程序的断点设置情况   delete breakpoints  清除所有断点    查看源码    命令 缩写 说明     list l 列出程序的源代码，默认每次显示10行。   list line num  将显示当前文件以“行号”为中心的前后10行代码，如：list 12   list func  将显示“函数名”所在函数的源代码，如：list main   list  不带参数，将接着上一次 list 命令的，输出下边的内容。    打印表达式    命令 缩写 说明     print 表达式 p 其中“表达式”可以是任何当前正在被测试程序的有效表达式，比如当前正在调试C语言的程序，那么“表达式”可以是任何C语言的有效表达式，包括数字，变量甚至是函数调用。   print a  将显示整数 a 的值   print \u002b\u002ba  将把 a 中的值加1,并显示出来   p \/x a  将显示整数 a 的十六进制值   p *array@3  将显示数组 array 的长度为3的值   print name  将显示字符串 name 的值   print gdb_test(22)  将以整数22作为参数调用 gdb_test() 函数   print gdb_test(a)  将以变量 a 作为参数调用 gdb_test() 函数   display 表达式  在单步运行时将非常有用，使用display命令设置一个表达式后，它将在每次单步进行指令后，紧接着输出被设置的表达式及值。如： display a   watch 表达式  设置一个监视点，一旦被监视的“表达式”的值改变，gdb将强行终止正在被调试的程序。如： watch a   whatis  查询变量或函数   info function  查询函数   info locals  显示当前堆栈页的所有变量    查看运行信息    命令 缩写 说明     where\/bt  当前运行的堆栈列表；   backtrace bt 显示当前调用堆栈   up\/down  改变堆栈显示的深度   set args  参数:指定运行时的参数   show args  查看设置好的参数   info program  来查看程序的是否在运行，进程号，被暂停的原因。    分割窗口    命令 缩写 说明     layout  用于分割窗口，可以一边查看代码，一边测试：   layout src  显示源代码窗口   layout asm  显示反汇编窗口   layout regs  显示源代码\/反汇编和CPU寄存器窗口   layout split  显示源代码和反汇编窗口   Ctrl \u002b L  刷新窗口    多线程    命令 缩写 说明     bt  看函数调用栈的所有信息，当程序执行异常时，可通过此命令查看程序的调用过程；   info threads  显示当前进程中的线程；   thread id  切换到具体的线程id，一般切换到具体的线程后再执行bt等操作。    attach  通过命令：$ ps -aux | grep main ,获取执行main的进程(pid)，例如执行main的进程为18786： 执行：$ gdb attach 18786，  gdb强行生成core文件  generate-core-file  core文件生成 ulimit",
    "inLanguage" : "en-us",
    "author" : "Jiang",
    "creator" : "Jiang",
    "publisher": "Jiang",
    "accountablePerson" : "Jiang",
    "copyrightHolder" : "Jiang",
    "copyrightYear" : "2020",
    "datePublished": "2020-12-14 19:08:28 \u002b0800 CST",
    "dateModified" : "2020-12-14 19:08:28 \u002b0800 CST",
    "url" : "https:\/\/jfy0o0.github.io\/2020\/linux-%E8%BD%AF%E4%BB%B6-gdb\/",
    "wordCount" : "268",
    "keywords" : [ "Linux Soft", "Jiang . \u0027s blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://jfy0o0.github.io">Jiang . &#39;s blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://jfy0o0.github.io">Jiang . &#39;s blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Linux Soft - gdb</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://jfy0o0.github.io" rel="author">Jiang</a> with ♥ 
                <span class="post-time">
                on <time datetime=2020-12-14 itemprop="datePublished">December 14, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://jfy0o0.github.io/categories/linux-soft/"> Linux Soft </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <h1 id="gdb">gdb</h1>
<p>GDB是一个由GNU开源组织发布的、UNIX/LINUX操作系统下的、基于命令行的、功能强大的程序调试工具。 对于一名Linux下工作的c/c++程序员，gdb是必不可少的工具；</p>
<h1 id="启动">启动</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">gdb test 
gdb -q test //表示不打印gdb版本信息，界面较为干净；
</code></pre></div><h1 id="运行命令">运行命令</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>run</td>
<td>r</td>
<td>运行程序，当遇到断点后，程序会在断点处停止运行，等待用户输入下一步的命令。</td>
</tr>
<tr>
<td>continue</td>
<td>c</td>
<td>继续执行，到下一个断点处（或运行结束）</td>
</tr>
<tr>
<td>next</td>
<td>n</td>
<td>单步跟踪程序，当遇到函数调用时，也不进入此函数体；此命令同 step 的主要区别是，step 遇到用户自定义的函数，将步进到函数中去运行，而 next 则直接调用函数，不会进入到函数体内。</td>
</tr>
<tr>
<td>step</td>
<td>s</td>
<td>单步调试如果有函数调用，则进入函数；与命令n不同，n是不进入调用的函数的</td>
</tr>
<tr>
<td>until</td>
<td></td>
<td>当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。</td>
</tr>
<tr>
<td>until + line num</td>
<td></td>
<td>运行至某行，不仅仅用来跳出循环</td>
</tr>
<tr>
<td>finish</td>
<td></td>
<td>运行程序，直到当前函数完成返回，并打印函数返回时的堆栈地址和返回值及参数值等信息。</td>
</tr>
<tr>
<td>call</td>
<td></td>
<td>调用程序中可见的函数，并传递“参数”，如：call gdb_test(55)</td>
</tr>
<tr>
<td>quit</td>
<td>q</td>
<td>简记为 q ，退出gdb</td>
</tr>
</tbody>
</table>
<h1 id="设置断点">设置断点</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>break n</td>
<td>b n</td>
<td>在第n行处设置断点</td>
</tr>
<tr>
<td>b fn1 if a&gt;b</td>
<td></td>
<td>条件断点设置</td>
</tr>
<tr>
<td>break func</td>
<td>b</td>
<td>在函数func()的入口处设置断点，如：break cb_button</td>
</tr>
<tr>
<td>delete 断点号n</td>
<td></td>
<td>删除第n个断点</td>
</tr>
<tr>
<td>disable 断点号n</td>
<td></td>
<td>暂停第n个断点</td>
</tr>
<tr>
<td>enable 断点号n</td>
<td></td>
<td>开启第n个断点</td>
</tr>
<tr>
<td>clear  行号n</td>
<td></td>
<td>清除第n行的断点</td>
</tr>
<tr>
<td>info b</td>
<td></td>
<td>显示当前程序的断点设置情况</td>
</tr>
<tr>
<td>delete breakpoints</td>
<td></td>
<td>清除所有断点</td>
</tr>
</tbody>
</table>
<h1 id="查看源码">查看源码</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>list</td>
<td>l</td>
<td>列出程序的源代码，默认每次显示10行。</td>
</tr>
<tr>
<td>list line num</td>
<td></td>
<td>将显示当前文件以“行号”为中心的前后10行代码，如：list 12</td>
</tr>
<tr>
<td>list func</td>
<td></td>
<td>将显示“函数名”所在函数的源代码，如：list main</td>
</tr>
<tr>
<td>list</td>
<td></td>
<td>不带参数，将接着上一次 list 命令的，输出下边的内容。</td>
</tr>
</tbody>
</table>
<h1 id="打印表达式">打印表达式</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>print 表达式</td>
<td>p</td>
<td>其中“表达式”可以是任何当前正在被测试程序的有效表达式，比如当前正在调试C语言的程序，那么“表达式”可以是任何C语言的有效表达式，包括数字，变量甚至是函数调用。</td>
</tr>
<tr>
<td>print a</td>
<td></td>
<td>将显示整数 a 的值</td>
</tr>
<tr>
<td>print ++a</td>
<td></td>
<td>将把 a 中的值加1,并显示出来</td>
</tr>
<tr>
<td>p /x a</td>
<td></td>
<td>将显示整数 a 的十六进制值</td>
</tr>
<tr>
<td>p *array@3</td>
<td></td>
<td>将显示数组 array 的长度为3的值</td>
</tr>
<tr>
<td>print name</td>
<td></td>
<td>将显示字符串 name 的值</td>
</tr>
<tr>
<td>print gdb_test(22)</td>
<td></td>
<td>将以整数22作为参数调用 gdb_test() 函数</td>
</tr>
<tr>
<td>print gdb_test(a)</td>
<td></td>
<td>将以变量 a 作为参数调用 gdb_test() 函数</td>
</tr>
<tr>
<td>display 表达式</td>
<td></td>
<td>在单步运行时将非常有用，使用display命令设置一个表达式后，它将在每次单步进行指令后，紧接着输出被设置的表达式及值。如： display a</td>
</tr>
<tr>
<td>watch 表达式</td>
<td></td>
<td>设置一个监视点，一旦被监视的“表达式”的值改变，gdb将强行终止正在被调试的程序。如： watch a</td>
</tr>
<tr>
<td>whatis</td>
<td></td>
<td>查询变量或函数</td>
</tr>
<tr>
<td>info function</td>
<td></td>
<td>查询函数</td>
</tr>
<tr>
<td>info locals</td>
<td></td>
<td>显示当前堆栈页的所有变量</td>
</tr>
</tbody>
</table>
<h1 id="查看运行信息">查看运行信息</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>where/bt</td>
<td></td>
<td>当前运行的堆栈列表；</td>
</tr>
<tr>
<td>backtrace</td>
<td>bt</td>
<td>显示当前调用堆栈</td>
</tr>
<tr>
<td>up/down</td>
<td></td>
<td>改变堆栈显示的深度</td>
</tr>
<tr>
<td>set args</td>
<td></td>
<td>参数:指定运行时的参数</td>
</tr>
<tr>
<td>show args</td>
<td></td>
<td>查看设置好的参数</td>
</tr>
<tr>
<td>info program</td>
<td></td>
<td>来查看程序的是否在运行，进程号，被暂停的原因。</td>
</tr>
</tbody>
</table>
<h1 id="分割窗口">分割窗口</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>layout</td>
<td></td>
<td>用于分割窗口，可以一边查看代码，一边测试：</td>
</tr>
<tr>
<td>layout src</td>
<td></td>
<td>显示源代码窗口</td>
</tr>
<tr>
<td>layout asm</td>
<td></td>
<td>显示反汇编窗口</td>
</tr>
<tr>
<td>layout regs</td>
<td></td>
<td>显示源代码/反汇编和CPU寄存器窗口</td>
</tr>
<tr>
<td>layout split</td>
<td></td>
<td>显示源代码和反汇编窗口</td>
</tr>
<tr>
<td>Ctrl + L</td>
<td></td>
<td>刷新窗口</td>
</tr>
</tbody>
</table>
<h1 id="多线程">多线程</h1>
<table>
<thead>
<tr>
<th>命令</th>
<th>缩写</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bt</td>
<td></td>
<td>看函数调用栈的所有信息，当程序执行异常时，可通过此命令查看程序的调用过程；</td>
</tr>
<tr>
<td>info threads</td>
<td></td>
<td>显示当前进程中的线程；</td>
</tr>
<tr>
<td>thread id</td>
<td></td>
<td>切换到具体的线程id，一般切换到具体的线程后再执行bt等操作。</td>
</tr>
</tbody>
</table>
<h1 id="attach">attach</h1>
<ul>
<li>通过命令：$ ps -aux | grep main ,获取执行main的进程(pid)，例如执行main的进程为18786：</li>
<li>执行：$ gdb attach 18786，</li>
</ul>
<h1 id="gdb强行生成core文件">gdb强行生成core文件</h1>
<ul>
<li>generate-core-file</li>
</ul>
<h1 id="core文件生成">core文件生成</h1>
<p>ulimit</p>
<ul>
<li>-a : 查看当前情况</li>
<li>-c : 可以限制core文件的大小（filesize的单位为kbyte）</li>
<li>unlimited 表示core文件的大小不受限制</li>
</ul>
<h1 id="设置core文件路径">设置core文件路径</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">1.编辑环境配置文件，让shell启动时自动设置ulimit
2.更改core文件生成路径
3.sysctl配置生效
vi /etc/profile
ulimit -c unlimited &gt; /dev/null 2&gt;&amp;<span style="color:#ae81ff">1</span>
vi /etc/sysctl.conf
kernel.core_uses_pid <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
kernel.core_pattern<span style="color:#f92672">=</span>/tmp/core-%e-%p
sysctl -p /etc/sysctl.conf
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Jiang . </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://jfy0o0.github.io/2020/linux-%E8%BD%AF%E4%BB%B6-gdb/>https://jfy0o0.github.io/2020/linux-%E8%BD%AF%E4%BB%B6-gdb/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://jfy0o0.github.io/tags/linux-soft/">
                    #Linux Soft</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://jfy0o0.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://jfy0o0.github.io/2020/cpp_stl_algorithm/" class="prev" rel="prev" title="C&#43;&#43; - STL Algorithm"><i class="iconfont icon-left"></i>&nbsp;C&#43;&#43; - STL Algorithm</a>
         
        
        <a href="https://jfy0o0.github.io/2020/boost-property_tree/" class="next" rel="next" title="Boost - property_tree">Boost - property_tree&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2011 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://jfy0o0.github.io">Jiang .</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
